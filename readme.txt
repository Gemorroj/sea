   ===ЗАГРУЗ-ЦЕНТР===
# Автор  : Sea
# E-mail : x-sea-x@ya.ru
# ICQ    : 355152215
# Вы не имеете права распространять данный скрипт
# По всем вопросам пишите в ICQ


===
Требования:PHP,MySQL,HTML
===
Установка:
1.Создаем новую базу данных в панели управления сайтом
2.Вписываем данные в moduls/config.php
3.Запускаем файл install.php и вводим пароль для доступа в админку
4.Если установка прошла успешно,то удаляем файл install.php и update.php
5.Ставим CHMOD 777 на папки files/ (и всем подпапкам), screen/, about/ и всем папкам в папке data/ (папке data/ - 755), moduls/cache/, attach/
6.Заходим в админку запуская файл input.php, настраеваем
===
Made by Sea.
2007.
-------

mod by Gemorroj

Если Вы добавляете файлы через FTP, то ставте папкам права 777!
Чтобы добавить описание следует в папке about/ создать такую же структуру папок, как и в папке files/, создать файл с таким же имененм, как описываемый + расширение .txt
Например, есть файл files/xxx/photo.jpg, в таком случае его описание должно находиться тут about/xxx/photo.jpg.txt
Текст должен быть в кодировке UTF-8, так же следите за разметкой, т.к. символы <>& не фильтруются (есть возможность в описаниях писать html код)
То же самое касается и скриншотов, они должны находиться в папке screen/ с такой же структурой, как и в папке files/. Возможные расширения скриншотов - .jpg или .gif
Например, есть файл files/xxx/photo.jpg, в таком случае его скриншот должен находиться тут screen/xxx/photo.jpg.jpg
Если Вы пользовались старыми версиями скрипта Sea Downloads, то вам потребуется перенести описания и скриншоты в папки, требуемые новой версией скрипта. Для этого Вы можете воспользоваться специально написанным для таких целей скриптом .about.php
Переименуйте его в about.php и зайдите через браузер. Далее, следуйте инструкциям скрипта.
Маркер наносимый на картинки находится тут moduls/marker.png замените его на свой
Чтобы ЗЦ был был на русском/английском, следует перейти по ссылке http://путь к скрипту/?langpack=russian или http://путь к скрипту/?langpack=english соответственно
Автологин в админку выглядит так http://example.com/input.php?p=пароль


Доступные ББкоды
[url][/url]
[url=http://wapinet.ru]сайт[/url]
[i][/i]
[b][/b]
[u][/u]
[big][/big]
[small][/small]
[code][/code]
[red][/red]
[yellow][/yellow]
[green][/green]
[blue][/blue]
[white][/white]
[color=#000000][/color]
[size=8][/size]
[img]http://wapinet.ru/img.gif[/img]

Есть возможность сделать ЗЦ сервисным (включается в админке)
Есть возможность выбора языкового пакета

Чтобы вывести общее кол-во файлов следует выполнить следующий код

mysql_connect('хост', 'юзер', 'пароль');
mysql_select_db('БД');
echo mysql_result(mysql_query('SELECT COUNT(1) FROM `files` WHERE `dir` = "0"'), 0);

то же самое но с ограничением на какую-либо папку 
echo mysql_result(mysql_query('SELECT COUNT(1) FROM `files` WHERE `dir` = "0" AND `infolder` LIKE("files/dir/%")'), 0);
где "files/dir/%" - маска поиска.


Требуется:
PHP 5.2.3 или выше, собранный как модуль Apache
PHP модули: mbstring, SimpleXML, GD2, FFMPEG (работает и без него, но не будет скринов видео)
MySQL 5.0.7 или выше

После установки/обновления загруз-центра не забудьте удалить файлы install.php и update.php


--------
21.06.2008
Исправлена ошибка в подсчете скачиваний файлов

--------
04.07.2008
Добавлен атоматический вывод скриншотов для 3gp, avi и mp4 файлов (требуется библиотека ffmpeg)

--------
09.07.2008
Добавлена возможность скачивания txt файлов в zip архиве, а так же как JAVA книгу (MIDP I)
Требуется PHP5 и библиотека MBSTRING

--------
11.07.2008
Переведено на Register_Globals Off
Добавлена компрессия страниц
Исправлены ошибки

--------
17.07.2008
Добавлен маркер картинок (только для изображений с измененным размером)
Доработаны настройки
Добавлен BBкод [url]
Исправлены ошибки

--------
20.07.2008
На все папки с файлами ставятся права 777
Добавлены заголовки запрещающие кеширование страниц

--------
22.07.2008
Поддержка JPEG и PNG скриншотов

--------
28.07.2008
Добавлен маркер картинок, реально записывающий указанную надпись на файл

--------
23.08.2008
Немного оптимизированна БД.
Добавлен предпросмотр thm и nth тем
Добавлено несколько превью картинок, ответственных за некоторые типы файлов
Исправлена ошибка при авторизации админа
Добавлены .htaccess

--------
24.08.2008
Исправлены мелкие ошибки

--------
16.09.2008
Переработано создание скриншотов к видео.
Исправлен незнчительный баг.

--------
05.10.2008
Оптимизация БД и кода
Оптимизировано кэширование
Добавлена возможность смены языковых пакетов
Исправлены ошибки в создании скриншотов к темам
Другие исправления

--------
11.10.2008
Оптимизация БД и кода (в тестах скрипт без проблем справлялся с 500.000 записями в БД)
Добавлена новостная лента
Исправлены мелкие ошибки

--------
16.10.2008
Исправлен баг с извлечением скриншотов из thm тем

--------
27.10.2008
Исправлены мелкие ошибки
Добавлена возможность просмотра нескольких скриншотов для видео
Добавлена возможность скачивания картинок с сохранением пропорций

--------
06.11.2008
Исправлена брешь в безопасности
Структура хранения скриншотов теперь должна быть полностью аналогична стуктуре хранения файлов, картинки с расширением GIF
Структура хранения описаний теперь должна быть полностью аналогична стуктуре хранения файлов, текстовые файлы с расширением txt в кодировке UTF-8
Добавлена поддержка Idv2 тегов

--------
11.11.2008
В настройки админки добавлено поле редактирования Email'а для стола заказов

--------
17.11.2008
Улучшено обновление БД

--------
18.11.2008
Дработана выборка скриншотов и THM тем

--------
22.12.2008
Исправлена ошибка с приоритетом каталогов
Требуется либо убрать unsigned с `priority` таблицы `files`, либо заново проинсталировать скрипт

-------
11.01.2009
Добавлено автоматическое создание директорий описаний и скриншотов при обновлении БД и дорбавлении новой папки
Не забудьте поставить права 777 на папку about

-------
21.01.2009
Исправлены мелкие ошибки

-------
29.01.2009
Исправлены ошибки в обновлении БД

-------
31.01.2009
Добавлен Mod_Rewrite

-------
07.02.2009
Добавлена возможность выводить описания файлов в общем просмотре.

-------
10.02.2009
Исправлены мелкие ошибки

-------
13.02.2009
Исправлена ошибка при создании каталогов из админки.

-------
15.02.2009
Переделан маркер картинок, замените файл moduls/marker.png на Ваш логотип.

-------
23.02.2009
.htaccess переписан с учетом Apache версии 1, исправляет ошибки с mod rewrite
Исправлена ошибка при обновлении отдельной директории ЗЦ
Добавлена возможность удалять комментарии в новостях

-------
26.02.2009
Добавлена возможность сделать загруз центр сервисным

-------
21.03.2009
Улучшена работа с темами
Добавлена возможность удалять отдельные комментарии к файлам

-------
25.03.2009
Добавлена поддержка анимированных превьюшек

-------
29.03.2009
Переведено на валидный XHTML Basic 1.1
Исправлены ошибки

-------
30.03.2009
Исправлена ошибка при создании JAD файлов
Оптимизировано создание JAR и ZIP файлов
Добавлена обработка мета-тега title

-------
04.04.2009
Описания теперь хранятся только в файлах
Если у Вас есть описания в БД и Вы хотите их сохранить, переименуйте файл .about.php в about.php и запустите, он создаст в папке about файлы с описаниями из БД, после того, как скрипт отработает, его нужно удалить
Скрипт нужно переинсталлировать, т.е. заменить все файлы и запустить install.php

-------
05.04.2009
Поправлены мелкие ошибки

-------
09.04.2009
Добавлено сохранение оригинальной частоы кадров в анимированных GIF картинках

-------
11.04.2009
Исправлено добавление скачиваний в статистике
Улучшено добавление/изменение/удаление описаний и скриншотов

-------
12.04.2009
Добавлена возможность смены CSS стилей пользователями
Небольшие доработки в целом
Скрипт требуется переинсталлировать

-------
19.04.2009
Исправлены мелкие ошибки
Добавлена возможность использования CSS стилей с удаленных сайтов

-------
21.04.2009
Исправлены мелкие ошибки

-------
25.04.2009
Исправлены ошибки в английском переводе и другие мелкие ошибки
Добавлена RSS лента новостей

-------
28.04.2009
Небольшие улучшения в RSS и полном обновлении
Улучшена производительность

-------
03.05.2009
Добавлено отображение длины мелодии с плавающим битрейдом
При голосовании сначала добавляется голос, потом отображаются результаты

-------
11.05.2009
Улучшен административный файловый менеджер
Исправлена ошибка при перезаписи MP3 тегов

-------
16.05.2009
Добавлено определение некоторых метаданных в THM темах
Массив с определяемыми моделями телефонов находится в файле moduls/functions.php в функции thm

-------
21.05.2009
Добавлен новый дизайн

-------
23.05.2009
Исправлена ошибка с отображением максимального онлайна

-------
01.06.2009
Минимизировано потребление RAM при полном обновлении БД
Исправлен ББкод wite на white

-------
07.06.2009
Добавлена функция очистки кэша
Добавлен модуль позволяющий читать txt файлы как в билиотеке
Улучшено отображение картинок из thm и nth тем

-------
17.06.2009
Мелкие оптимизации в коде
Исправлена ошибка с сортировкой в ТОП20 с отключенным рейтингом

-------
21.06.2009
Оптимизация кода
Вернул автотранслит имен файлов с первым символом "!"
Добавил отображение уменьшенного скриншота в общем просмотре файлов
Для корректного обновления следует зменить файлы скрипта и выполнить update.php, после чего, файл update.php следует удалить

-------
23.06.2009
Исправлена ошибка с отображением информации о новых файлах

-------
28.06.2009
Исправлена ошибка в навигации по ТОПу
Мини скриншоты теперь автоматически создаются из скриншотов залитых по FTP
Исправлена ошибка с подсчетом максимум онлайна

-------
29.07.2009
Исправлены мелкие ошибки
Разбивка текста в библиотеке теперь идет по пробелам или переносам строк

-------
02.08.2009
Исправлена ошибка с вылетом скрипта при невозможности создания превью

-------
09.08.2009
Надеюсь, окончательно исправлена ошибка с максимум в онлайне)
Исправлена ошибка с созданием превью
Подержка анимации переведена на модульную структуру

-------
16.08.2009
Испрвлена ошибка с максимум в онлайне))))
Немного ускорено обновление БД

-------
23.08.2009
Исправлена ошибка с текущим онлайном
Небольшие оптимизации в PHP коде

-------
30.08.2009
Улучшен маркер картинок. В файле font.ttf шрифт, которым будет записываться текст. По умолчанию лежит Arial
Добавлен просмотр SWF файлов
В модулях появилась возможность отключать просмотр SWF в общем просмотре
Добавлена возможность отображать несколько рекламных ссылок в случайном порядке
Кардинально ускорено обновление БД
Исправлены ошибки

-------
08.09.2009
Улучшена работа с рекламными блоками. Внимание! Теперь следует писать обычный XHTML код, а не ББкод
Исправлены мелкие ошибки

-------
09.09.2009
Исправлена ошибка приводящая к невозможности создать JAR файл из TXT файла, если в тексте найдены нераспознаные символы
Теперь TXT файлы читаются если они в кодировке Windows-1251 и UTF-8. Рекомендуется, конечно, UTF-8
Добавлена поддержка аудио формата OGG
Теперь все данные об аудио файлах и видео полностью кэшируются
Добавлена возможность пользователям выбрать количество отображаемых символов в библиотеке
Теперь для работы скрипта не требуется mbstring, все делается через iconv

-------
13.09.2009
Немного улучшена производительность
Добавлена возможность пользователям самим выбрать размер картинки
Размеры картинок по умолчанию теперь настраиваются в админке (ОБЯЗАТЕЛЬНО настройте этот параметр!)
Добавлено отображение иконок JAR файлов (ОБЯЗАТЕЛЬНО настройте этот параметр, адрес папки с иконками настройте на data/jar_ico и дайте этой папке права 777)
Добавлено отображение картинок из ZIP архивов (ОБЯЗАТЕЛЬНО настройте этот параметр, адрес папки с картинками настройте на data/zip_pic и дайте этой папке права 777)

-------
22.09.2009
Создан модуль для продажи контента через биллиногвые системы.
В комплекте обработчик смс для a1agregator. Если нужны обработчики для других биллингов/агрегаторов, свяжитесь со мной (wapinet$mail.ru), я напишу обработчик и включу в стандартную поставку.

Модуль покупается отдельно.
Цену можно узнать на странице http://wapinet.ru/shop.php?sea

Исправлены мелкие ошибки.

--------
28.09.2009
Оптимизировано потребление оперативной памяти в библиотеке.
Теперь считывается не весь файл, а только блок читаемый пользователем.

--------
29.09.2009
Оптимизирована работа с БД, добавлено кеширование метаданных из thm и nth тем.
Добавлена возможность отображать первую строку txt файла как описание.

--------
03.10.2009
Очередные оптимизации в работе с БД
Добавлена возможность включить капчу на комментарии
Обработчик ошибок вынесен в отдельную функцию error
Добавлен модуль расширенного сервиса
Исправлены ошибки
Чтобы обновить установленный скрипт, нужно заменить все файлы скрипта, а так же запустить файл update.php

--------
10.10.2009
Исправлена ошибка в английском ленгпаке
Добавлена возможность включить навигацию по описаниям файлов

--------
13.10.2009
Исправлены ошибки.
Немного изменены имена кэшируемых файлов. Чтобы у Вас не хранился старый бесполезный кэш на сервере, не забудьте его почистить.

--------
17.10.2009
Добавлена поддержка тем форматов UTZ, SCS и SDT

--------
26.10.2009
Добавлено наложение копирайта на превьюшки видео и тем
Исправлена ошибка с определением кодировки в библиотеке
Исправлена ошибка с количеством файлов в топе
Добавлена поддержка BMP формата
Мелкие оптимизации в коде

--------
29.10.2009
Файл .about.php теперь может:
1) Перенести все описания из БД в файлы
2) Раскидать скриншоты из 1 папки в директорию скриншотов с требуемой структурой
3) Раскидать описания из 1 папки в директорию описаний с требуемой структурой
Несущественные изменения в коде, обновлена библиотека PclZip

--------
08.11.2009
Улучшено обновление БД
Оптимизирован поиск и добавлен поиск по именам директорий
Добавлена возможность перемещать файлы из админки
Исправлены мелкие ошибки

--------
15.11.2009
Изменен процесс обновления БД, теперь весь процесс проходит в 1 цикл и занимает меньше ресурсов
Добавлен модуль файлообменника
Добавлен модуль жалобы на файл
Исправлены ошибки

--------
16.11.2009
Исправлены мелкие ошибки

--------
17.11.2009
Исправлены мелкие ошибки

--------
19.11.2009
Исправлены мелкие ошибки

--------
28.11.2009
Добавлена возможность делать файлы невидимыми
Добавлен модуль отправки ссылки на Email
Исправлены мелкие ошибки

--------
06.12.2009
Исправлены мелкие ошибки
Добавлена возможность ограничивать число символов в одной строке в библиотеке

--------
25.12.2009
Немного почищен код
В аплоаде можно добавлять сколько угодно файлов (нужен JavaScript)

--------
03.01.2010
Обновлен PEAR модуль Tar.php
Добавлена возможность маркировать только превью файлов, без скачиваемого файла

--------
10.01.2010
Картинка-маркер накладываемая на изображения теперь сохраняет оригинальную прозрачность
Расширены возможности управления отображения превьюшек
Из ZIP архивов теперь файлы молжно скачивать по отдельности, постраничная навигация в текстовых файлах архива

--------
07.02.2010
Исправлены мелкие ошибки
Добавлена возможность установки стиля по умолчанию из админки
Снижена нагрузка на БД за счет лучшей работы с онлайн пользователями

--------
08.03.2010
Исправлены мелкие ошибки

--------
25.03.2010
Исправлена ошибка в библиотеке

--------
28.03.2010
Оптимизирована работа с MySQL в новостях, поиске и топе.
В поиске, найденное совпадение теперь подсвечивается

--------
17.01.2011
Накопительное обновление. Множество мелких исправлений
Добавлена поодержка APK файлов (приложения для Android)
Добавлена тема Wapinet

--------
12.05.2011
Добавлена возможность выбрать язык для зц по умолчанию из админки
Исправлена ошибка отображения списка файлов в админке, если был выбран язык отличный от русского

--------
13.05.2011
Исправлена ошибка с заданием mp3 тегов

--------
24.05.2011
Добавлена возможность отображать последние комментарии в описании файла

--------
21.07.2011
Добавлена возможность прикреплять дополнительные файлы (вложения) к основному файлу.
Для корректного обновления следует запусить update.php, и в настройках указать путь к папке с вложениями. По умолчанию - это папка attach.

--------
13.10.2011
Улучшен алгоритм поиска иконки в jar файлах

--------
26.11.2011
Добавлена возможность задавать произвольные title, description и keywords теги.
Для корректного обновления следует запусить update.php

--------
20.03.2012
Исправлен подсчет скрытых файлов
Исправлена подсветка директорий в поиске

--------
24.03.2012
Добавлена поддержка flv файлов
Добавлен flash плеер для mp3, flv и mp4 файлов
Мелкие исправления

--------
01.04.2012
Исправлено графическое отображение рейтинга
Исправлено возможное проседание производительности при чтении текстовых файлов из архивов
Все вызовы iconv заменены на mbstring

--------
xx.04.2012
Скрипт лицензирван New BSD License
Добавлены турецкая и азербайджанская локализация


--------
Gemorroj